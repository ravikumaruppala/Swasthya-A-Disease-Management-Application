import tkinter as tk
from tkinter import messagebox

# Disease data
fever = {
    "NAME": "FEVER",
    "Symptoms": ["Cough", "Sweating", "Headache", "Chills and Shivering", "Dehydration", "General Weakness"],
    "Prevention": "Wash your hands often\nAvoid touching your nose or mouth",
    "Home remedies": "Drink plenty of fluids and take adequate rest"
}

diarrhea = {
    "NAME": "DIARRHEA",
    "Symptoms": ["Belly cramps or pain", "Nausea", "Vomiting", "Fever", "Bloof in the stool", "Mucus in the stool"],
    "Prevention": "Access to safe drinking water\nUse of improved sanitation\nHand washing with soap\nRotavirus vaccination",
    "Home remedies": "Drinking plenty of water, avoiding fatty foods and trying probiotics"
}

lung = {
    "NAME": "LUNG CANCER",
    "Symptoms": ["Breathlessness", "Sputum Prduction", "Chronic Cough"],
    "Prevention": "Stop smoking\nAvoid Secondhand smoke\nTest for radon\nAvoid Asbestos",
    "Home remedies": "Quit smoking\nImprove air quality\nManage stress levels\nDevelop muscle strength"
}

# Symptom list
symptoms = [
    "Cough", "Sweating", "Headache", "Chills and Shivering", "Dehydration", "General Weakness",
    "Belly cramps or pain", "Nausea", "Vomiting", "Fever", "Bloof in the stool", "Mucus in the stool",
    "Breathlessness", "Sputum Prduction", "Chronic Cough"
]

# Disease mapping
diseases = [fever, diarrhea, lung]
diseases1 = [1, 2, 3]
diseases2 = {1: "FEVER", 2: "DIARRHEA", 3: "LUNG CANCER"}

# GUI setup
root = tk.Tk()
root.title("SWASTHYA")

symptom_check = [tk.IntVar() for _ in range(len(symptoms))]

# Display function
def display():
    selected_in = [symptom.get() for symptom in symptom_check]
    input1 = []
    name = set()
    prevention = set()
    homer = set()
    count2 = [0, 0, 0]

    for i in range(len(symptoms)):
        if selected_in[i] == 1:
            input1.append(symptoms[i])

    for i in range(len(input1)):
        for j in range(len(diseases)):
            d = diseases[j]
            if input1[i] in d["Symptoms"]:
                name.add(d["NAME"])
                prevention.add(d["Prevention"])
                homer.add(d["Home remedies"])
                count2[j] += 1

    if max(count2) == 0:
        messagebox.showinfo("Diagnosis", "No disease matched with selected symptoms.")
        return

    inde = count2.index(max(count2))

    messagebox.showinfo("DISEASE", diseases[inde]["NAME"])
    messagebox.showinfo("Preventions", diseases[inde]["Prevention"])
    messagebox.showinfo("Home Remedies", diseases[inde]["Home remedies"])

    # Remove the most probable disease and show other possibilities
    other_diseases = diseases.copy()
    other_ids = diseases1.copy()

    other_diseases.pop(inde)
    other_ids.pop(inde)

    name1 = list(name)
    if diseases[inde]["NAME"] in name1:
        name1.remove(diseases[inde]["NAME"])

    if name1:
        messagebox.showinfo("OTHER POSSIBILITIES", ", ".join(name1))
        messagebox.showinfo("Preventions", ", ".join(prevention))
        messagebox.showinfo("Home Remedies", ", ".join(homer))

# Title
tk.Label(root, text="Select Symptoms", font=("Arial", 14, "bold")).grid(row=0, column=1)

# Checkbox for each symptom
for i in range(len(symptoms)):
    checkbox = tk.Checkbutton(root, text=symptoms[i], variable=symptom_check[i])
    checkbox.grid(row=i+1, column=1, sticky="w")

# Diagnose button
diagnose = tk.Button(root, text="Diagnose", command=display)
diagnose.grid(row=len(symptoms)+2, column=1)

# Start the GUI loop
root.mainloop()
